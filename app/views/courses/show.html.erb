<div>

  <div class="card one" style="width: 18rem;">
    <%= image_tag("palestra.jpg", :class => "card-img-top", :alt => "Card image cap") %>
    <div class="card-body">
      <h1><%= @course.name %></h1>
      <p class="card-text"><br>From gym: <i>
        <%= link_to "#{@course.gym.username}", gym_path(@course.gym.id) %></i></p>
      <p class="card-text"><br>Price: <i><%= @course.price %></i></p>
    </div>
  </div>

  <div class="card two">
    <div id="map"  style="height: 360px; margin: 2%; background: grey" > </div>
  </div>

</div>

</br>

<div class="card">
  <div class="card-body">
<p class="card-text"><br>Course description: <i><%= @course.description %></i></p>
  </div>
</div>

</br>

<div class="card">
  <div class="card-body">
    <div class="media">
      <%= image_tag("comments.png", :size =>"20x20") %>
      <div class="media-body">
        <h5 class="mt-0">Comments</h5>
        <hr>
        <% @course.course_comments.each do |comment| %>

        <div class="card w-50 border-primary">
          <div class="card-body">
            <p class="card-text"><%= comment.text %></p>
          </div>
        </div>
        <br>


        <% end %>
      </div>
    </div>
  </div>
</div>
<br>

<% if athlete_signed_in? %>
  <%= link_to "<button type='button' class='btn btn-primary btn-danger navbar-btn' data-toggle='modal' data-target=''>Take a Comment</button>".html_safe, new_course_comment_path(course: @course.id)%>
<% end %>

<%= link_to "<button type='button' class='btn btn-primary btn-danger navbar-btn' data-toggle='modal' data-target=''>Edit</button>".html_safe, edit_course_path(@course)%>

<%= link_to "<button type='button' class='btn btn-primary btn-danger navbar-btn' data-toggle='modal' data-target=''>Back</button>".html_safe, courses_path%>

<br><br>


<script type="text/javascript">
  // Initialize the  communication with the platform
  var platform = new H.service.Platform({
    'app_id': 'A3k50ziCbuDE8NVHU1lr',
    'app_code': 'PfpBfdphIFeJ0zMC2cq1Pw'
  });
  var pixelRatio = window.devicePixelRatio || 1;
  var defaultLayers = platform.createDefaultLayers({
    tileSize: pixelRatio === 1 ? 256 : 512,
    ppi: pixelRatio === 1 ? undefined : 320
  });

  //Initialize map
  var map = new H.Map(document.getElementById('map'),
    defaultLayers.normal.map, {
      pixelRatio: pixelRatio,
      zoom: 12,
      center: { lat: 41.90, lng: 12.5 }
    });

  //for interactions and UI components
  var behavior = new H.mapevents.Behavior(new H.mapevents.MapEvents(map));
  var ui = H.ui.UI.createDefault(map, defaultLayers);

  //add markers
  var lati = <%= @course.gym.latitude %>;
  var lngi = <%= @course.gym.longitude %>;

  var marker = new H.map.Marker({
    lat: lati, lng: lngi});

  map.addObject(marker);
  map.setCenter({lat:lati, lng:lngi});

</script>
