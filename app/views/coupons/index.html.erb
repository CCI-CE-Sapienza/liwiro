<p id="notice"><%= notice %></p>

<h1>Coupons</h1>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>gym</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @coupons.each do |coupon| %>
      <tr>
        <td><%= coupon.code %></td>
        <td><%= coupon.gym %></td>
        <td><%= link_to 'Show', coupon %></td>
        <% if athlete_signed_in? && !(coupon.already_joined(coupon, current_athlete))%>
            <td><%= link_to "join", coupons_join_path(:id => coupon.id), method: :put %></td>
        <% end %>
        <% if athlete_signed_in? && coupon.already_joined(coupon, current_athlete) %>
            <td><%= link_to "leave", coupons_leave_path(:id => coupon.id), method: :put %></td>
        <% end %>

      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Coupon', new_coupon_path %>
